namespace SpriteKind {
    export const Coin = SpriteKind.create()
    export const Cam = SpriteKind.create()
    export const Pow4 = SpriteKind.create()
    export const Shell = SpriteKind.create()
    export const Banana = SpriteKind.create()
    export const Speedometer = SpriteKind.create()
    export const Checkpoint = SpriteKind.create()
    export const Track = SpriteKind.create()
    export const Bot = SpriteKind.create()
    export const Timer = SpriteKind.create()
}
sprites.onOverlap(SpriteKind.Cam, SpriteKind.Pow4, function (sprite, otherSprite) {
    if (sprPlayerPowerup == 0) {
        sprPlayerPowerup = randint(1, 2)
        if (sprPlayerPowerup == 1) {
            sprPowerupImg.setImage(img`
                ..........bbbbbbbbbbb..........
                ........bbfffffffffffbb........
                ......bbfffffffffffffffbb......
                .....bfffffffffffffffffffb.....
                ....bfffffffffffffffffffffb....
                ...bfffffff1fffffffffffffffb...
                ..bfffffff141fffff1ff111ffffb..
                ..bfffffff1441fff1411141ffffb..
                .bfffffff114111111414441fffffb.
                .bfffffff1177117144411171ffffb.
                bfffffff1777144177777711ffffffb
                bffffff1771771417177777111ffffb
                bfffff17714177771417777111ffffb
                bfffff17714417714441771111ffffb
                bfffff111117777144411714171fffb
                bffff11fff11777777771774171fffb
                bffff1ffffff111777714177771fffb
                bffff11fffff111117144417711fffb
                bfffff11ff111dede111111111ffffb
                bffffff11111111dedede1111fffffb
                bffffffffffffff1111111ffffffffb
                .bfffffffffffffffffffffffffffb.
                .bfffffffffffffffffffffffffffb.
                ..bfffffffffffffffffffffffffb..
                ..bfffffffffffffffffffffffffb..
                ...bfffffffffffffffffffffffb...
                ....bfffffffffffffffffffffb....
                .....bfffffffffffffffffffb.....
                ......bbfffffffffffffffbb......
                ........bbfffffffffffbb........
                ..........bbbbbbbbbbb..........
                `)
        } else if (sprPlayerPowerup == 2) {
            sprPowerupImg.setImage(img`
                ..........bbbbbbbbbbb..........
                ........bbfffffffffffbb........
                ......bbfffffffffffffffbb......
                .....bfffffffffffffffffffb.....
                ....bfffffffffffffffffffffb....
                ...bfffffffffffffffffffffffb...
                ..bfffffffffffffffffffffffffb..
                ..bffffffffffff11fffffffffffb..
                .bffffffffffff1ee1fffffffffffb.
                .bffffffffffff1ee1fffffffffffb.
                bfffffffffffff1ee1ffffffffffffb
                bffffffffffff11551ffffffffffffb
                bffffffffffff155511fffffffffffb
                bffffffffffff155551fffffffffffb
                bfffffffffff1555551fffffffffffb
                bfffffffffff15555511ffffffffffb
                bffffffffff115155551ffffffffffb
                bffffffff111551555511fffffffffb
                bfffffff11555155515511ffffffffb
                bfffffff155551555155511fffffffb
                bfffffff1155115511155511ffffffb
                .bfffffff1111f111f115551fffffb.
                .bfffffffffffffffff11111fffffb.
                ..bfffffffffffffffffffffffffb..
                ..bfffffffffffffffffffffffffb..
                ...bfffffffffffffffffffffffb...
                ....bfffffffffffffffffffffb....
                .....bfffffffffffffffffffb.....
                ......bbfffffffffffffffbb......
                ........bbfffffffffffbb........
                ..........bbbbbbbbbbb..........
                `)
        }
    }
    textEngine("Powerup Acquired")
})
sprites.onOverlap(SpriteKind.Cam, SpriteKind.Banana, function (sprite, otherSprite) {
    console.logValue("U'VE been BANANANAed", 0)
    sprites.destroy(otherSprite)
    speed = 0
    oldVX = 0
    properVY = 0
    properVX = 0
    properVY = 0
})
scene.onOverlapTile(SpriteKind.Cam, assets.tile`myTile15`, function (sprite, location) {
    game.setGameOverMessage(true, "You Won!")
    game.gameOver(true)
})
controller.B.onEvent(ControllerButtonEvent.Pressed, function () {
    textEngine("You are now p2")
})
sprites.onOverlap(SpriteKind.Bot, SpriteKind.Track, function (sprite, otherSprite) {
    sprBot.follow(sprites.allOfKind(SpriteKind.Track)[sprites.allOfKind(SpriteKind.Track).indexOf(otherSprite) + 1], 90)
})
controller.A.onEvent(ControllerButtonEvent.Pressed, function () {
    if (sprPlayerPowerup == 1) {
        sprGreenShell = sprites.create(img`
            ......1...............
            .....141.....1..111...
            .....1441...1411141...
            ....114111111414441...
            ....1177117144411171..
            ...1777144177777711...
            ..1771771417177777111.
            .17714177771417777111.
            .17714417714441771111.
            .111117777144411714171
            11fff11777777771774171
            1ffffff111777714177771
            11fffff111117144417711
            .11ff111dede111111111.
            ..11111111dedede1111..
            ..........1111111.....
            `, SpriteKind.Shell)
        sprGreenShell.setFlag(SpriteFlag.DestroyOnWall, true)
        sprGreenShell.setPosition(sprCam.x, sprCam.y)
        GreenShellVX = Render.getAttribute(Render.attribute.dirX) * 90
        GreenShellVy = Render.getAttribute(Render.attribute.dirY) * 90
        sprGreenShell.vx = GreenShellVX
        sprGreenShell.vy = GreenShellVy
        scaling.scaleToPixels(sprGreenShell, 3, ScaleDirection.Uniformly, ScaleAnchor.Middle)
    } else if (sprPlayerPowerup == 2) {
        sprBanana = sprites.create(img`
            . . . . . . . f f . . . . . . . 
            . . . . . . f e e f . . . . . . 
            . . . . . . f e e f . . . . . . 
            . . . . . . f e e f . . . . . . 
            . . . . . f f 5 5 f . . . . . . 
            . . . . . f 5 5 5 f f . . . . . 
            . . . . . f 5 5 5 5 f . . . . . 
            . . . . f 5 5 5 5 5 f . . . . . 
            . . . . f 5 5 5 5 5 f f . . . . 
            . . . f f 5 f 5 5 5 5 f . . . . 
            . f f f 5 5 f 5 5 5 5 f f . . . 
            f f 5 5 5 f 5 5 5 f 5 5 f f . . 
            f 5 5 5 5 f 5 5 5 f 5 5 5 f f . 
            f f 5 5 f f 5 5 f f f 5 5 5 f f 
            . f f f f . f f f . f f 5 5 5 f 
            . . . . . . . . . . . f f f f f 
            `, SpriteKind.Banana)
        sprBanana.setPosition(sprCam.x, sprCam.y)
        sprBanana.x += Render.getAttribute(Render.attribute.dirX) * -5
        sprBanana.y += Render.getAttribute(Render.attribute.dirY) * -5
        scaling.scaleToPixels(sprBanana, 2, ScaleDirection.Uniformly, ScaleAnchor.Middle)
    }
    sprPlayerPowerup = 0
    sprPowerupImg.setImage(img`
        ...............................
        ...............................
        ...............................
        ...............................
        ...............................
        ...............................
        ...............................
        ...............................
        ...............................
        ...............................
        ...............................
        ...............................
        ...............................
        ...............................
        ...............................
        ...............................
        ...............................
        ...............................
        ...............................
        ...............................
        ...............................
        ...............................
        ...............................
        ...............................
        ...............................
        ...............................
        ...............................
        ...............................
        ...............................
        ...............................
        ...............................
        `)
})
scene.onOverlapTile(SpriteKind.Cam, assets.tile`myTile17`, function (sprite, location) {
    game.setGameOverMessage(false, "Disqualified! Player 2 wins")
    game.gameOver(false)
})
scene.onOverlapTile(SpriteKind.Bot, assets.tile`myTile15`, function (sprite, location) {
    game.setGameOverMessage(false, "You Lost!")
    game.gameOver(false)
})
function placeCheckpoints () {
    checkpointID = 1
    for (let value of tiles.getTilesByType(assets.tile`myTile8`)) {
        sprCheckpoint = sprites.create(img`
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . 6 6 6 6 6 6 6 . . . . . 
            . . . 6 6 6 6 6 6 6 6 6 . . . . 
            . . . 6 6 6 6 6 6 6 6 6 . . . . 
            . . . 6 6 6 2 2 2 6 6 6 . . . . 
            . . . 6 6 6 2 2 2 6 6 6 . . . . 
            . . . 6 6 6 2 2 2 6 6 6 . . . . 
            . . . 6 6 6 6 6 6 6 6 6 . . . . 
            . . . 6 6 6 6 6 6 6 6 6 . . . . 
            . . . . 6 6 6 6 6 6 6 . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            `, SpriteKind.Checkpoint)
        tiles.placeOnTile(sprCheckpoint, value)
        sprites.setDataNumber(sprCheckpoint, "ID", checkpointID)
        checkpointID += 1
        tiles.setTileAt(value, assets.tile`transparency16`)
    }
}
sprites.onOverlap(SpriteKind.Cam, SpriteKind.Checkpoint, function (sprite, otherSprite) {
    otherSprite.sayText(sprites.readDataNumber(otherSprite, "ID"), 100, true)
})
sprites.onOverlap(SpriteKind.Cam, SpriteKind.Coin, function (sprite, otherSprite) {
    music.play(music.melodyPlayable(music.baDing), music.PlaybackMode.InBackground)
    info.changeScoreBy(1)
    sprites.destroy(otherSprite)
})
scene.onOverlapTile(SpriteKind.Cam, assets.tile`myTile0`, function (sprite, location) {
    game.setGameOverMessage(true, "You Won!")
    game.gameOver(true)
})
function timer () {
    sprTimerText = sprites.create(img`
        .....ffffff.........
        ....fffffffff.......
        ....fffffffff.......
        ....ffff.ffff.......
        ....fff...fff.......
        ..........fff.......
        ..........fff.......
        ..........fff.......
        ......fffffff.......
        ......ffffffff......
        ......fffffffff.....
        ..........ffffff....
        ............ffff....
        .............fff....
        ..ffff......ffff....
        ..fffffff.ffffff....
        ..ffffffffffffff....
        ....fffffffffff.....
        .......fffff........
        ....................
        `, SpriteKind.Timer)
    sprTimerText.setFlag(SpriteFlag.RelativeToCamera, true)
    pause(200)
    for (let index = 0; index < 4; index++) {
        sprTimerText.setImage(img`
            .....ffffff.........
            ....fffffffff.......
            ....fffffffff.......
            ....ffff.ffff.......
            ....fff...fff.......
            ..........fff.......
            ..........fff.......
            ..........fff.......
            ......fffffff.......
            ......ffffffff......
            ......fffffffff.....
            ..........ffffff....
            ............ffff....
            .............fff....
            ..ffff......ffff....
            ..fffffff.ffffff....
            ..ffffffffffffff....
            ....fffffffffff.....
            .......fffff........
            ....................
            `)
        pause(100)
        sprTimerText.setImage(img`
            ....................
            ....................
            ....................
            ....................
            ....................
            ....................
            ....................
            ....................
            ....................
            ....................
            ....................
            ....................
            ....................
            ....................
            ....................
            ....................
            ....................
            ....................
            ....................
            ....................
            `)
        pause(100)
    }
    sprTimerText.setImage(img`
        ...ffffffff.........
        .ffffffffffff.......
        .fffffffffffff......
        .ffff...fffffff.....
        .fff......fffff.....
        .fff.......ffff.....
        .fff........ffff....
        .ffff.......ffff....
        .fffff......ffff....
        ..ffff......ffff....
        ..ffff......ffff....
        ............ffff....
        ...........ffff.....
        ...........ffff.....
        .........ffffff.....
        ......ffffffff......
        .fffffffffffffffff..
        .fffffffffffffffff..
        .fffffffffffffffff..
        ....................
        `)
    pause(200)
    for (let index = 0; index < 4; index++) {
        sprTimerText.setImage(img`
            ...ffffffff.........
            .ffffffffffff.......
            .fffffffffffff......
            .ffff...fffffff.....
            .fff......fffff.....
            .fff.......ffff.....
            .fff........ffff....
            .ffff.......ffff....
            .fffff......ffff....
            ..ffff......ffff....
            ..ffff......ffff....
            ............ffff....
            ...........ffff.....
            ...........ffff.....
            .........ffffff.....
            ......ffffffff......
            .fffffffffffffffff..
            .fffffffffffffffff..
            .fffffffffffffffff..
            ....................
            `)
        pause(100)
        sprTimerText.setImage(img`
            ....................
            ....................
            ....................
            ....................
            ....................
            ....................
            ....................
            ....................
            ....................
            ....................
            ....................
            ....................
            ....................
            ....................
            ....................
            ....................
            ....................
            ....................
            ....................
            ....................
            `)
        pause(100)
    }
    sprTimerText.setImage(img`
        ........ffff........
        ........ffff........
        ........ffff........
        .......fffff........
        ......ffffff........
        ..ffffffffff........
        ..ffffffffff........
        ..ffffffffff........
        .........fff........
        .........fff........
        .........fff........
        .........fff........
        .........fff........
        .........fff........
        .........fff........
        .........fff........
        .........fff........
        ..fffffffffffffffff.
        ..fffffffffffffffff.
        ..fffffffffffffffff.
        `)
    pause(200)
    for (let index = 0; index < 4; index++) {
        sprTimerText.setImage(img`
            ........ffff........
            ........ffff........
            ........ffff........
            .......fffff........
            ......ffffff........
            ..ffffffffff........
            ..ffffffffff........
            ..ffffffffff........
            .........fff........
            .........fff........
            .........fff........
            .........fff........
            .........fff........
            .........fff........
            .........fff........
            .........fff........
            .........fff........
            ..fffffffffffffffff.
            ..fffffffffffffffff.
            ..fffffffffffffffff.
            `)
        pause(100)
        sprTimerText.setImage(img`
            ....................
            ....................
            ....................
            ....................
            ....................
            ....................
            ....................
            ....................
            ....................
            ....................
            ....................
            ....................
            ....................
            ....................
            ....................
            ....................
            ....................
            ....................
            ....................
            ....................
            `)
        pause(100)
    }
}
function placeCoins () {
    for (let value2 of tiles.getTilesByType(assets.tile`myTile3`)) {
        sprCoin = sprites.create(img`
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . 4 5 5 . . . . . . . 
            . . . . . 4 5 4 4 5 . . . . . . 
            . . . . . 4 5 4 4 5 . . . . . . 
            . . . . . 4 5 4 4 5 . . . . . . 
            . . . . . . 4 5 5 . . . . . . . 
            . . . . . . . . . . . . . . . . 
            `, SpriteKind.Coin)
        tiles.placeOnTile(sprCoin, value2)
        tiles.setTileAt(value2, assets.tile`transparency16`)
        animation.runImageAnimation(
        sprCoin,
        [img`
            . . b b b b . . 
            . b 5 5 5 5 b . 
            b 5 d 3 3 d 5 b 
            b 5 3 5 5 1 5 b 
            c 5 3 5 5 1 d c 
            c d d 1 1 d d c 
            . f d d d d f . 
            . . f f f f . . 
            `,img`
            . . b b b . . . 
            . b 5 5 5 b . . 
            b 5 d 3 d 5 b . 
            b 5 3 5 1 5 b . 
            c 5 3 5 1 d c . 
            c 5 d 1 d d c . 
            . f d d d f . . 
            . . f f f . . . 
            `,img`
            . . . b b . . . 
            . . b 5 5 b . . 
            . b 5 d 1 5 b . 
            . b 5 3 1 5 b . 
            . c 5 3 1 d c . 
            . c 5 1 d d c . 
            . . f d d f . . 
            . . . f f . . . 
            `,img`
            . . . b b . . . 
            . . b 5 5 b . . 
            . . b 1 1 b . . 
            . . b 5 5 b . . 
            . . b d d b . . 
            . . c d d c . . 
            . . c 3 3 c . . 
            . . . f f . . . 
            `,img`
            . . . b b . . . 
            . . b 5 5 b . . 
            . b 5 1 d 5 b . 
            . b 5 1 3 5 b . 
            . c d 1 3 5 c . 
            . c d d 1 5 c . 
            . . f d d f . . 
            . . . f f . . . 
            `,img`
            . . . b b b . . 
            . . b 5 5 5 b . 
            . b 5 d 3 d 5 b 
            . b 5 1 5 3 5 b 
            . c d 1 5 3 5 c 
            . c d d 1 d 5 c 
            . . f d d d f . 
            . . . f f f . . 
            `],
        50,
        true
        )
        scaling.scaleToPixels(sprCoin, 5, ScaleDirection.Uniformly, ScaleAnchor.Middle)
    }
}
function makeCheckpoints (start: Image, track: Image) {
    currentLocation = tiles.getTilesByType(start)[0]
    tiles.setTileAt(currentLocation, assets.tile`transparency16`)
    sprTrack = sprites.create(img`
        7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 
        7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 
        7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 
        7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 
        7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 
        7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 
        7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 
        7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 
        7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 
        7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 
        7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 
        7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 
        7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 
        7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 
        7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 
        7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 
        `, SpriteKind.Track)
    tiles.placeOnTile(sprTrack, currentLocation)
    newPath = true
    while (newPath) {
        newPath = false
        if (tiles.tileAtLocationEquals(currentLocation.getNeighboringLocation(CollisionDirection.Right), track)) {
            currentLocation = currentLocation.getNeighboringLocation(CollisionDirection.Right)
            newPath = true
        } else if (tiles.tileAtLocationEquals(currentLocation.getNeighboringLocation(CollisionDirection.Left), track)) {
            currentLocation = currentLocation.getNeighboringLocation(CollisionDirection.Left)
            newPath = true
        } else if (tiles.tileAtLocationEquals(currentLocation.getNeighboringLocation(CollisionDirection.Top), track)) {
            currentLocation = currentLocation.getNeighboringLocation(CollisionDirection.Top)
            newPath = true
        } else if (tiles.tileAtLocationEquals(currentLocation.getNeighboringLocation(CollisionDirection.Bottom), track)) {
            currentLocation = currentLocation.getNeighboringLocation(CollisionDirection.Bottom)
            newPath = true
        }
        tiles.setTileAt(currentLocation, assets.tile`transparency16`)
        sprTrack = sprites.create(img`
            7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 
            7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 
            7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 
            7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 
            7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 
            7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 
            7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 
            7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 
            7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 
            7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 
            7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 
            7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 
            7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 
            7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 
            7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 
            7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 
            `, SpriteKind.Track)
        tiles.placeOnTile(sprTrack, currentLocation)
    }
    sameY = 0
    for (let index = 0; index <= sprites.allOfKind(SpriteKind.Track).length - 1; index++) {
        if (index > 0) {
            sprites.allOfKind(SpriteKind.Track)[index].setImage(img`
                b b b b 
                b b b b 
                `)
            if (sprites.allOfKind(SpriteKind.Track)[index].y == sprites.allOfKind(SpriteKind.Track)[index - 1].y) {
                sameY += 1
                if (sameY > 1) {
                    sprites.allOfKind(SpriteKind.Track)[index - 1].z = 10
                }
            } else {
                sameY = 0
            }
            if (sprites.allOfKind(SpriteKind.Track)[index].x == sprites.allOfKind(SpriteKind.Track)[index - 1].x) {
                sameX += 1
                if (sameX > 1) {
                    sprites.allOfKind(SpriteKind.Track)[index - 1].z = 10
                }
            } else {
                sameX = 0
            }
        }
    }
    for (let value4 of sprites.allOfKind(SpriteKind.Track)) {
        if (value4.z == 10) {
            sprites.destroy(value4)
        }
    }
    tiles.setTileAt(tiles.getTileLocation(22, 8), assets.tile`myTile15`)
}
function placePowerUps () {
    for (let value3 of tiles.getTilesByType(sprites.dungeon.collectibleRedCrystal)) {
        tiles.setTileAt(value3, assets.tile`transparency16`)
        sprPowerUp = sprites.create(img`
            . . . . . . . . . . . . . . . . 
            . . . . . . 4 4 4 4 . . . . . . 
            . . . . 4 4 4 5 5 4 4 4 . . . . 
            . . . 3 3 3 3 4 4 4 4 4 4 . . . 
            . . 4 3 3 3 3 2 2 2 1 1 4 4 . . 
            . . 3 3 3 3 3 2 2 2 1 1 5 4 . . 
            . 4 3 3 3 3 2 2 2 2 2 5 5 4 4 . 
            . 4 3 3 3 2 2 2 4 4 4 4 5 4 4 . 
            . 4 4 3 3 2 2 4 4 4 4 4 4 4 4 . 
            . 4 2 3 3 2 2 4 4 4 4 4 4 4 4 . 
            . . 4 2 3 3 2 4 4 4 4 4 2 4 . . 
            . . 4 2 2 3 2 2 4 4 4 2 4 4 . . 
            . . . 4 2 2 2 2 2 2 2 2 4 . . . 
            . . . . 4 4 2 2 2 2 4 4 . . . . 
            . . . . . . 4 4 4 4 . . . . . . 
            . . . . . . . . . . . . . . . . 
            `, SpriteKind.Pow4)
        tiles.placeOnTile(sprPowerUp, value3)
        scaling.scaleToPixels(sprPowerUp, 8, ScaleDirection.Uniformly, ScaleAnchor.Middle)
    }
}
scene.onOverlapTile(SpriteKind.Cam, assets.tile`myTile`, function (sprite, location) {
    game.setGameOverMessage(true, "You Won!")
    game.gameOver(true)
})
function placeBot (start: Image) {
    sprBot = sprites.create(img`
        ............5585855............
        ...........555858555...........
        ..........55558585555..........
        ..........55558585555..........
        .........5555585855555.........
        .........5555b8b8b5555.........
        .........555bb8b8bb555.........
        .........55bbb8b8bbb55.........
        .........55bbb8b8bbb55.........
        .........5bbbb8b8bbbb5.........
        .........bbbbfffffbbbb.........
        .........bbfffffffffbb.........
        .........bfffdddddfffb.........
        .........bff4444444ffb.........
        .........4444444444444.........
        ........444222222222444........
        .......44422222222222444.......
        ......4422222222222222244......
        ......4222ee2222222ee2224......
        ......222eeeeeeeeeeeee222......
        .......2eeee6666666eeee2.......
        ..........e668888866e..........
        ...ccccc556688888886655ccccc...
        ...ffff55ccccccccccccc55ffff...
        .cccccc5fffffffffffffff5cccccc.
        cbbbbbbfff11111111111fffbbbbbbc
        cccccccfe1bcccccccccb1efccccccc
        cccccccf.bc224444422cb.fccccccc
        cfffffffbbcbbbbbbbbbcbbfffffffc
        ffffffff.bc222222222cb.ffffffff
        ffffffff4bc.2222222.cb4ffffffff
        ffffffff222bbbbbbbbb222ffffffff
        .ffffff.................ffffff.
        `, SpriteKind.Bot)
    sprBot.setPosition(sprites.allOfKind(SpriteKind.Track)[0].x, sprites.allOfKind(SpriteKind.Track)[0].y)
    scaling.scaleToPixels(sprBot, 4, ScaleDirection.Uniformly, ScaleAnchor.Middle)
}
function textEngine (text: string) {
    textSprite.setFlag(SpriteFlag.RelativeToCamera, true)
    textSprite.setText(text)
    textSprite.setMaxFontHeight(9)
    textSprite.setOutline(1, 15)
    textSprite.setPosition(80, -80)
    animation.runMovementAnimation(
    textSprite,
    animation.animationPresets(animation.easeDown),
    600,
    false
    )
    pause(800)
    for (let index = 0; index < 4; index++) {
        textSprite.setText(text)
        pause(50)
        textSprite.setText("")
        pause(50)
    }
    textSprite.setText(text)
    animation.runMovementAnimation(
    textSprite,
    animation.animationPresets(animation.easeUp),
    600,
    false
    )
}
let sprPowerUp: Sprite = null
let sameX = 0
let sameY = 0
let newPath = false
let sprTrack: Sprite = null
let currentLocation: tiles.Location = null
let sprCoin: Sprite = null
let sprTimerText: Sprite = null
let sprCheckpoint: Sprite = null
let checkpointID = 0
let sprBanana: Sprite = null
let GreenShellVy = 0
let GreenShellVX = 0
let sprBot: Sprite = null
let properVX = 0
let properVY = 0
let sprPlayerPowerup = 0
let speed = 0
let oldVX = 0
let sprPowerupImg: Sprite = null
let sprCam: Sprite = null
let textSprite: TextSprite = null
let sprGreenShell: Sprite = null
sprGreenShell = sprites.create(img`
    . . . . . . . . . . . . . . . . 
    . . . . . . . . . . . . . . . . 
    . . . . . . . . . . . . . . . . 
    . . . . . . . . . . . . . . . . 
    . . . . . . . . . . . . . . . . 
    . . . . . . . . . . . . . . . . 
    . . . . . . . . . . . . . . . . 
    . . . . . . . . . . . . . . . . 
    . . . . . . . . . . . . . . . . 
    . . . . . . . . . . . . . . . . 
    . . . . . . . . . . . . . . . . 
    . . . . . . . . . . . . . . . . 
    . . . . . . . . . . . . . . . . 
    . . . . . . . . . . . . . . . . 
    . . . . . . . . . . . . . . . . 
    . . . . . . . . . . . . . . . . 
    `, SpriteKind.Projectile)
textSprite = textsprite.create("")
info.setScore(0)
scene.setBackgroundImage(img`
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
    bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
    bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
    bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
    bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
    bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
    bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
    bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
    bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
    bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
    bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
    bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
    bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
    bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
    bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
    bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
    bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
    bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
    bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
    bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
    bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
    bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
    bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
    bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
    bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
    bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
    bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
    bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
    bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
    bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
    bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
    bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
    bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
    bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
    bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
    bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
    bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
    bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
    bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
    bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
    bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
    bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
    bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
    bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
    bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
    bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
    bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
    bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
    bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
    bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
    bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
    bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
    bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
    bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
    bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
    bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
    bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
    bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
    bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
    bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
    `)
tiles.setCurrentTilemap(tilemap`toadRaceway`)
sprCam = Render.getRenderSpriteVariable()
sprCam.setKind(SpriteKind.Cam)
sprPowerupImg = sprites.create(img`
    ...............................
    ...............................
    ...............................
    ...............................
    ...............................
    ...............................
    ...............................
    ...............................
    ...............................
    ...............................
    ...............................
    ...............................
    ...............................
    ...............................
    ...............................
    ...............................
    ...............................
    ...............................
    ...............................
    ...............................
    ...............................
    ...............................
    ...............................
    ...............................
    ...............................
    ...............................
    ...............................
    ...............................
    ...............................
    ...............................
    ...............................
    `, SpriteKind.Player)
sprPowerupImg.setFlag(SpriteFlag.RelativeToCamera, true)
sprPowerupImg.setPosition(145, 20)
let sprOverlay = sprites.create(img`
    ............fffffff............
    ...........f1121211f...........
    ..........f111212111f..........
    ..........f111212111f..........
    .........f11112121111f.........
    .........f111b2b2b111f.........
    .........f11bb2b2bb11f.........
    .........f1bbb2b2bbb1f.........
    .........f1bbb2b2bbb1f.........
    .........fbbbb2b2bbbbf.........
    .........fbbbfffffbbbf.........
    .........fbfffffffffbf.........
    .........ffffdddddffff.........
    ..........ff6666666ff..........
    .........6666666666666.........
    ........666888888888666........
    .......66688888888888666.......
    ......6688888888888888866......
    ......6888ee8888888ee8886......
    ......888eeeeeeeeeeeee888......
    .......8eeee4444444eeee8.......
    ..........e442222244e..........
    ...ccccc884422222224488ccccc...
    ...ffff88ccccccccccccc88ffff...
    .cccccc8fffffffffffffff8cccccc.
    cbbbbbbfff11111111111fffbbbbbbc
    cccccccfe1bcccccccccb1efccccccc
    cccccccf.bc224444422cb.fccccccc
    cfffffffbbcbbbbbbbbbcbbfffffffc
    ffffffff.bc222222222cb.ffffffff
    ffffffff4bc.2222222.cb4ffffffff
    ffffffff222bbbbbbbbb222ffffffff
    .ffffff.................ffffff.
    `, SpriteKind.Player)
scaling.scaleToPixels(sprOverlay, 45, ScaleDirection.Uniformly, ScaleAnchor.Middle)
sprOverlay.setFlag(SpriteFlag.RelativeToCamera, true)
sprOverlay.setPosition(80, 95)
scene.cameraFollowSprite(sprCam)
tiles.placeOnTile(sprCam, tiles.getTileLocation(25, 7))
scaling.scaleToPixels(sprCam, 5, ScaleDirection.Uniformly, ScaleAnchor.Middle)
Render.moveWithController(0, 2, 0)
Render.setViewMode(ViewMode.raycastingView)
placeCoins()
placePowerUps()
let sprMarker = sprites.create(img`
    . . . . . . . . . . 
    . . 8 8 8 8 8 8 . . 
    . 8 8 8 8 8 8 8 8 . 
    . 8 8 8 8 8 8 8 8 . 
    . 8 8 8 8 8 8 8 8 . 
    . 8 8 8 8 8 8 8 8 . 
    . 8 8 8 8 8 8 8 8 . 
    . 8 8 8 8 8 8 8 8 . 
    . . 8 8 8 8 8 8 . . 
    . . . . . . . . . . 
    `, SpriteKind.Projectile)
let myMinimap = minimap.minimap(MinimapScale.Sixteenth, 1, 1)
minimap.includeSprite(myMinimap, sprCam, MinimapSpriteScale.Quadruple)
let mapSprite = sprites.create(minimap.getImage(minimap.minimap(MinimapScale.Sixteenth, 0, 15)), SpriteKind.Player)
mapSprite.setFlag(SpriteFlag.RelativeToCamera, true)
mapSprite.setPosition(23, 98)
oldVX = Render.getAttribute(Render.attribute.dirX) * speed
let oldVY = Render.getAttribute(Render.attribute.dirY) * speed
let time = game.runtime()
let speedometer = sprites.create(img`
    ..............fffffffffffff..............
    ............ffbbbbbbbbbbbbbff............
    ..........ffbbfffffffffffffbbff..........
    .........fbbffffffff11fffffffbbf.........
    ........fbfffffffff1ff1ffffffffbf........
    .......fbffffffffffff1ffffffffffbf.......
    ......fbffffffffffff1ffffffffffffbf......
    .....fbffffffffffff1111fffffffffffbf.....
    ....fbfffffffffffffffffffffffffffffbf....
    ...fbfffffffffffffffffffffffffffffffbf...
    ..fbffff1fffffffffffffffffffffff11fffbf..
    ..fbfff11ffffffffffffffffffffff1ff1ffbf..
    .fbfffff1ffffffffffffffffffffffff1ffffbf.
    .fbfffff1ffffffffffffffffffffff1ff1fffbf.
    fbfffff111ffffffffffffffffffffff11fffffbf
    fbfffffffffffffffffffffffffffffffffffffbf
    fbfffffffffffffffffffffffffffffffffffffbf
    fbfffffffffffffffffffffffffffffffffffffbf
    fbfffffffffffffffffffffffffffffffffffffbf
    fbfffffffffffffffffffffffffffffffffffffbf
    fbff11ffffffffffffffffffffffffffff1ff1fbf
    fbf1ff1fffffffffffffffffffffffffff1ff1fbf
    fbf1ff1fffffffffffffffffffffffffff1111fbf
    fbf1ff1ffffffffffffffffffffffffffffff1fbf
    fbff11fffffffffffffffffffffffffffffff1fbf
    fbfffffffffffffffffffffffffffffffffffffbf
    `, SpriteKind.Speedometer)
speedometer.setPosition(140, 107)
speedometer.setFlag(SpriteFlag.RelativeToCamera, true)
let speedometerNeedle = sprites.create(img`
    ...............................
    ...............................
    ...............................
    ...............................
    ...............................
    ...............................
    ...............................
    ...............................
    ...............................
    ...............................
    ...............................
    ...............................
    ...............................
    .............2222..............
    ......222222222222.............
    222222222222222222.............
    ......222222222222.............
    .............2222..............
    ...............................
    ...............................
    ...............................
    ...............................
    ...............................
    ...............................
    ...............................
    ...............................
    ...............................
    ...............................
    ...............................
    ...............................
    ...............................
    `, SpriteKind.Speedometer)
speedometerNeedle.setFlag(SpriteFlag.RelativeToCamera, true)
speedometerNeedle.setPosition(140, 117)
makeCheckpoints(assets.tile`myTile14`, assets.tile`myTile8`)
timer()
placeBot(assets.tile`myTile14`)
game.onUpdate(function () {
    if (controller.up.isPressed() && speed < 70) {
        speed += 0.6
    } else {
        if (speed > 2) {
            speed += -2
        } else {
            speed = 0
        }
    }
    properVX = Render.getAttribute(Render.attribute.dirX) * speed
    properVY = Render.getAttribute(Render.attribute.dirY) * speed
    if (controller.right.isPressed()) {
        sprOverlay.setImage(img`
            ...............................
            ...............................
            ..................111..........
            ................1111211........
            ...............111112121.......
            ...............1111211211......
            ..............11aaa212111......
            ..............1aaa2aa21111.....
            .............1aaaa2a2a1111.....
            .............aaaa2aa2aa11......
            ............fffff2a2aaa11......
            ............fffffff2aaaa.......
            .............ffddffffaaa.......
            ............66666ddfffa........
            .........66666666666fff........
            ........66666666886666.........
            ........8886888888888868.......
            ........e888888888888888.......
            ........eeee888ee888e8888......
            .........eeeeeeeeeeeeee8e......
            ..........ee4444444ee..ee......
            ..........e442222244...........
            ...ccccc884422222224c88ccccc...
            ...ffff88ccccccccc22cc88ffff...
            .cccccc8fffffffffffffff8cccccc.
            cbbbbbbfff11111111111fffbbbbbbc
            cccccccfe1bcccccccccb1efccccccc
            cccccccf.bc224444422cb.fccccccc
            cfffffffbbcbbbbbbbbbcbbfffffffc
            ffffffff.bc222222222cb.ffffffff
            ffffffff4bc.2222222.cb4ffffffff
            ffffffff222bbbbbbbbb222ffffffff
            .ffffff.................ffffff.
            `)
    } else if (controller.left.isPressed()) {
        sprOverlay.setImage(img`
            ...............................
            ...............................
            ..........111..................
            ........1121111................
            .......121211111...............
            ......1121121111...............
            ......111212aaa11..............
            .....11112aa2aaa1..............
            .....1111a2a2aaaa1.............
            ......11aa2aa2aaaa.............
            ......11aaa2a2fffff............
            .......aaaa2fffffff............
            .......aaaffffddff.............
            ........afffdd66666............
            ........fff66666666666.........
            .........66668866666666........
            .......8688888888886888........
            .......888888888888888e........
            ......8888e888ee888eeee........
            ......e8eeeeeeeeeeeeee.........
            ......ee..ee4444444ee..........
            ...........442222244e..........
            ...ccccc88c422222224488ccccc...
            ...ffff88cc22ccccccccc88ffff...
            .cccccc8fffffffffffffff8cccccc.
            cbbbbbbfff11111111111fffbbbbbbc
            cccccccfe1bcccccccccb1efccccccc
            cccccccf.bc224444422cb.fccccccc
            cfffffffbbcbbbbbbbbbcbbfffffffc
            ffffffff.bc222222222cb.ffffffff
            ffffffff4bc.2222222.cb4ffffffff
            ffffffff222bbbbbbbbb222ffffffff
            .ffffff.................ffffff.
            `)
    } else {
        sprOverlay.setImage(img`
            ...............................
            ............1121211............
            ...........111212111...........
            ...........111212111...........
            ..........11112121111..........
            ..........111a2a2a111..........
            ..........11aa2a2aa11..........
            ..........1aaa2a2aaa1..........
            ..........1aaa2a2aaa1..........
            ..........aaaa2a2aaaa..........
            ..........aaafffffaaa..........
            ..........afffffffffa..........
            ..........fffdddddfff..........
            ..........ff6666666ff..........
            .........6666666666666.........
            ........666888888888666........
            .......66688888888888666.......
            ......6688888888888888866......
            ......6888ee8888888ee8886......
            ......888eeeeeeeeeeeee888......
            .......8eeee4444444eeee8.......
            ..........e442222244e..........
            ...ccccc884422222224488ccccc...
            ...ffff88ccccccccccccc88ffff...
            .cccccc8fffffffffffffff8cccccc.
            cbbbbbbfff11111111111fffbbbbbbc
            cccccccfe1bcccccccccb1efccccccc
            cccccccf.bc224444422cb.fccccccc
            cfffffffbbcbbbbbbbbbcbbfffffffc
            ffffffff.bc222222222cb.ffffffff
            ffffffff4bc.2222222.cb4ffffffff
            ffffffff222bbbbbbbbb222ffffffff
            .ffffff.................ffffff.
            `)
    }
    transformSprites.rotateSprite(speedometerNeedle, Math.map(speed, 0, 71, 0, 182))
})
game.onUpdate(function () {
    sprCam.vx = oldVX
    sprCam.vy = oldVY
    if (oldVX > properVX) {
        oldVX += -2
    } else {
        oldVX += 2
    }
    if (oldVY > properVY) {
        oldVY += -2
    } else {
        oldVY += 2
    }
})
game.onUpdate(function () {
	
})
game.onUpdateInterval(100, function () {
    sprMarker.setPosition(sprCam.x, sprCam.y)
    myMinimap = minimap.minimap(MinimapScale.Sixteenth, 1, 1)
    minimap.includeSprite(myMinimap, sprMarker, MinimapSpriteScale.Octuple)
    minimap.includeSprite(myMinimap, sprBot, MinimapSpriteScale.Quadruple)
    mapSprite.setImage(minimap.getImage(myMinimap))
    scaling.scaleToPixels(mapSprite, 48, ScaleDirection.Uniformly, ScaleAnchor.Middle)
})
