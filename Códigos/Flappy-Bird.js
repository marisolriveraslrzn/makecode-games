enum ActionKind {
    Walking,
    Idle,
    Jumping
}
namespace SpriteKind {
    export const Gap = SpriteKind.create()
}
function introGame1 () {
    game.showLongText("Pulsa \"A\" para que tome impulso, pero...", DialogLayout.Bottom)
    game.showLongText("¡¡¡CUIDADO!!!", DialogLayout.Bottom)
    game.showLongText("Hay obstáculos arriba y abajo, esquívalos y lleva a Bird a su hogar.", DialogLayout.Bottom)
}
controller.anyButton.onEvent(ControllerButtonEvent.Pressed, function () {
    if (ini == 1) {
        music.pewPew.play()
        mySprite.vy = -100
        animation.setAction(mySprite, ActionKind.Walking)
        mySprite.startEffect(effects.rings, 300)
    } else {
        ini = 1
        mySprite.ay = 300
    }
})
sprites.onOverlap(SpriteKind.Player, SpriteKind.Gap, function (sprite, otherSprite) {
    if (otherSprite.right - sprite.left < 2) {
        info.changeScoreBy(1)
    }
})
sprites.onOverlap(SpriteKind.Player, SpriteKind.Projectile, function (sprite, otherSprite) {
    game.over(false)
})
function introGame0 () {
    game.showLongText("¡\"Flappy Bird\"!", DialogLayout.Full)
}
let projectile: Sprite = null
let gapSprite: Sprite = null
let gapImage: Image = null
let bottomImage: Image = null
let topImage: Image = null
let gap = 0
let ini = 0
let mySprite: Sprite = null
introGame0()
scene.setBackgroundColor(9)
info.setScore(0)
effects.blizzard.startScreenEffect()
mySprite = sprites.create(img`
    ....................
    ....................
    ....................
    .......ffffffff.....
    .....ff5555555ff....
    ....f55555555ff1f...
    .ffff5555555ff1f1f..
    f5111f555555ff1f1f..
    f5551f5555555f111f..
    .f555f55555555fffff.
    ..fff55555555f44444f
    ....f5555555f4fffff.
    .....ff555555f4444f.
    ......f5555555fffff.
    .......fffffff......
    ....................
    `, SpriteKind.Player)
ini = 0
introGame1()
let anim = animation.createAnimation(ActionKind.Walking, 25)
anim.addAnimationFrame(img`
    ....................
    ....................
    ....................
    .......ffffffff.....
    .....ff5555555ff....
    ....f55555555ff1f...
    .ffff5555555ff1f1f..
    f5111f555555ff1f1f..
    f5551f5555555f111f..
    .f555f55555555fffff.
    ..fff55555555f44444f
    ....f5555555f4fffff.
    .....ff555555f4444f.
    ......f5555555fffff.
    .......fffffff......
    ....................
    `)
anim.addAnimationFrame(img`
    ....................
    ....................
    ....................
    .......ffffffff.....
    .....ff5555555ff....
    ....f55555555ff1f...
    ....f5555555ff1f1f..
    .fffff555555ff1f1f..
    f5111f5555555f111f..
    f5551f55555555fffff.
    .f55555555555f44444f
    ..fff5555555f4fffff.
    ....fff555555f4444f.
    ......f5555555fffff.
    .......fffffff......
    ....................
    `)
anim.addAnimationFrame(img`
    ....................
    ....................
    ....................
    .......ffffffff.....
    .....ff5555555ff....
    ....f55555555ff1f...
    ....f5555555ff1f1f..
    ....ff555555ff1f1f..
    .fff1f5555555f111f..
    f5111f55555555fffff.
    f555555555555f44444f
    .f55f5555555f4fffff.
    ..fffff555555f4444f.
    ......f5555555fffff.
    .......fffffff......
    ....................
    `)
anim.addAnimationFrame(img`
    ....................
    ....................
    ....................
    .......ffffffff.....
    .....ff5555555ff....
    ....f55555555ff1f...
    .ffff5555555ff1f1f..
    f5111f555555ff1f1f..
    f5551f5555555f111f..
    .f555f55555555fffff.
    ..fff55555555f44444f
    ....f5555555f4fffff.
    .....ff555555f4444f.
    ......f5555555fffff.
    .......fffffff......
    ....................
    `)
anim.addAnimationFrame(img`
    ....................
    ....................
    ....................
    .......ffffffff.....
    .....ff5555555ff....
    ....f55555555ff1f...
    ....f5555555ff1f1f..
    .fffff555555ff1f1f..
    f5111f5555555f111f..
    f5551f55555555fffff.
    .f55555555555f44444f
    ..fff5555555f4fffff.
    ....fff555555f4444f.
    ......f5555555fffff.
    .......fffffff......
    ....................
    `)
anim.addAnimationFrame(img`
    ....................
    ....................
    ....................
    .......ffffffff.....
    .....ff5555555ff....
    ....f55555555ff1f...
    ....f5555555ff1f1f..
    ....ff555555ff1f1f..
    .fff1f5555555f111f..
    f5111f55555555fffff.
    f555555555555f44444f
    .f55f5555555f4fffff.
    ..fffff555555f4444f.
    ......f5555555fffff.
    .......fffffff......
    ....................
    `)
animation.attachAnimation(mySprite, anim)
mySprite.sayText("Pulsa \"A\" para comenzar", 2000, true)
game.onUpdate(function () {
    if (ini == 1) {
        if (mySprite.vy > 0) {
            animation.setAction(mySprite, ActionKind.Walking)
        }
        if (mySprite.bottom > 120 || mySprite.top < 0) {
            game.over(false)
        }
    }
})
game.onUpdateInterval(1500, function () {
    if (ini == 1) {
        gap = randint(0, 3)
        if (gap == 0) {
            topImage = img`
                .....6eeeeeeeeeece6.....
                ....6776eeeeeeeee676....
                ...6776666eeee6766776...
                ..6776ee77777777667776..
                ...668ce7768867788666...
                ......ce77eeee67ee......
                ......eeeeeeeeeeee......
                ......eeeeeeeeeeee......
                ......eeeeeeeeeeee......
                ......eeeeeeeeeeee......
                ......eeeeeeeeeeee......
                ......eeeeeeeeeeee......
                ......eeeeeeeeeeee......
                ......beeeeeeeeeeb......
                .......beeeeeeeeb.......
                ........beeeeeeb........
                `
            bottomImage = img`
                ........................
                ........................
                ..........bbbb..........
                ........bbddddbb........
                .......bddbbbbddb.......
                ......bdbbddddbbdb......
                .....bdbbdbbbbdbbdb.....
                .....bdbdbddddbdbdb.....
                .....cdbbdbbbbdbbdc.....
                .....cbdbbddddbbdbc.....
                .....efbddbbbbddbce.....
                .....eeffbddddbccee.....
                .....eeeeffcccceee......
                .....ceeeeeeeeeeee......
                .....ceeeeeeeeeeee......
                .....feeeeeeeeeeee......
                .....cceeeeeeeeeee......
                ......feeeeeeeeeee......
                .....6fceeeeeeeeee6.....
                ....6776eeeeeeeee676....
                ...6777666eeee6666776...
                ..67768e67766777667776..
                ...668ee7768867788666...
                ......ee77eeee77ecee....
                ......ee6eeeeee6eef.....
                ......eeeeeeeeeeeef.....
                ......eeeeeeeeeeeef.....
                ......eeeeeeeeeeecf.....
                ......ceeeeeeeeeecf.....
                ......ceeeeeeeeeeff.....
                ......feeeeeeeeeefe.....
                .....6feeeeeeeeeef6.....
                ....6776eeeeeeeee676....
                ...6777666eeee6667776...
                ..6776ee67777777667776..
                ...668ee7768867788666...
                ......ee77eeee67ee......
                ......ee6eeeeee6ce......
                ......eefeeeeeeece......
                ......eeceeeeeeece......
                ......eeceeeeeeefe......
                ......eeceeeeeeefe......
                ......eeeeeeeeeefe......
                ......eeeeeeeeeece......
                .....6eeeeeeeeeece6.....
                ....6776eeeeeeeee676....
                ...6776666eeee6766776...
                ..6776ee77777777667776..
                ...668ce7768867788666...
                ......ce77eeee67ee......
                ......ce6eeeeee6ee......
                ......ceeeeeeeeeee......
                ......fcceeeeeecee......
                ......fccceeececce......
                ......fcceeecceccc......
                ......fccceecceccc......
                ......fccccceceecc......
                .....6fccccccccccf6.....
                ....6776ccccccccc676....
                ...6776676cccc6766776...
                ..6776cc77777777667776..
                ...668cc7768867788666...
                ......cc77cccc67cf......
                ......cc6cccccc6cf......
                `
        } else if (gap == 1) {
            topImage = img`
                .....6feeeeeeeeeef6.....
                ....6776eeeeeeeee676....
                ...6777666eeee6667776...
                ..6776ee67777777667776..
                ...668ee7768867788666...
                ......ee77eeee67ee......
                ......ee6eeeeee6ce......
                ......eefeeeeeeece......
                ......eeceeeeeeece......
                ......eeceeeeeeefe......
                ......eeceeeeeeefe......
                ......eeeeeeeeeefe......
                ......eeeeeeeeeece......
                .....6eeeeeeeeeece6.....
                ....6776eeeeeeeee676....
                ...6776666eeee6766776...
                ..6776ee77777777667776..
                ...668ce7768867788666...
                ......ce77eeee67ee......
                ......eeeeeeeeeeee......
                ......eeeeeeeeeeee......
                ......eeeeeeeeeeee......
                ......eeeeeeeeeeee......
                ......eeeeeeeeeeee......
                ......eeeeeeeeeeee......
                ......eeeeeeeeeeee......
                ......beeeeeeeeeeb......
                .......beeeeeeeeb.......
                ........beeeeeeb........
                ........................
                ........................
                ........................
                `
            bottomImage = img`
                ........................
                ........................
                ........................
                ........................
                ........................
                ........................
                ........................
                ..........bbbb..........
                ........bbddddbb........
                .......bddbbbbddb.......
                ......bdbbddddbbdb......
                .....bdbbdbbbbdbbdb.....
                .....bdbdbddddbdbdb.....
                .....cdbbdbbbbdbbdc.....
                .....cbdbbddddbbdbc.....
                .....efbddbbbbddbce.....
                .....eeffbddddbccee.....
                .....eeeeffcccceee......
                .....ceeeeeeeeeeee......
                .....ceeeeeeeeeeee......
                .....feeeeeeeeeeee......
                .....cceeeeeeeeeee......
                ......feeeeeeeeeee......
                .....6fceeeeeeeeee6.....
                ....6776eeeeeeeee676....
                ...6777666eeee6666776...
                ..67768e67766777667776..
                ...668ee7768867788666...
                ......ee77eeee77ecee....
                ......ee6eeeeee6eef.....
                ......eeeeeeeeeeeef.....
                ......eeeeeeeeeeeef.....
                ......eeeeeeeeeeecf.....
                ......ceeeeeeeeeecf.....
                ......ceeeeeeeeeeff.....
                ......feeeeeeeeeefe.....
                .....6feeeeeeeeeef6.....
                ....6776eeeeeeeee676....
                ...6777666eeee6667776...
                ..6776ee67777777667776..
                ...668ee7768867788666...
                ......ee77eeee67ee......
                ......ee6eeeeee6ce......
                ......eefeeeeeeece......
                ......eeceeeeeeece......
                ......eeceeeeeeefe......
                ......eeceeeeeeefe......
                ......eeeeeeeeeefe......
                ......eeeeeeeeeece......
                .....6eeeeeeeeeece6.....
                ....6776eeeeeeeee676....
                ...6776666eeee6766776...
                ..6776ee77777777667776..
                ...668ce7768867788666...
                ......ce77eeee67ee......
                ......ce6eeeeee6ee......
                `
        } else if (gap == 2) {
            topImage = img`
                .....6feeeeeeeeeef6.....
                ....6776eeeeeeeee676....
                ...6777666eeee6667776...
                ..6776ee67777777667776..
                ...668ee7768867788666...
                ......ee77eeee67eeee....
                ......ee6eeeeee6cef.....
                ......eeeeeeeeeeeef.....
                ......eeeeeeeeeeeef.....
                ......eeeeeeeeeeecf.....
                ......eeeeeeeeeeecf.....
                ......eeeeeeeeeeeff.....
                ......feeeeeeeeeefe.....
                .....6feeeeeeeeeef6.....
                ....6776eeeeeeeee676....
                ...6777666eeee6667776...
                ..6776ee67777777667776..
                ...668ee7768867788666...
                ......ee77eeee67ee......
                ......ee6eeeeee6ce......
                ......eefeeeeeeece......
                ......eeceeeeeeece......
                ......eeceeeeeeefe......
                ......eeceeeeeeefe......
                ......eeeeeeeeeefe......
                ......eeeeeeeeeece......
                .....6eeeeeeeeeece6.....
                ....6776eeeeeeeee676....
                ...6776666eeee6766776...
                ..6776ee77777777667776..
                ...668ce7768867788666...
                ......ce77eeee67ee......
                ......eeeeeeeeeeee......
                ......eeeeeeeeeeee......
                ......eeeeeeeeeeee......
                ......eeeeeeeeeeee......
                ......eeeeeeeeeeee......
                ......eeeeeeeeeeee......
                ......eeeeeeeeeeee......
                ......beeeeeeeeeeb......
                .......beeeeeeeeb.......
                ........beeeeeeb........
                ........................
                ........................
                ........................
                ........................
                ........................
                ........................
                `
            bottomImage = img`
                ........................
                ........................
                ........................
                ........................
                ..........bbbb..........
                ........bbddddbb........
                .......bddbbbbddb.......
                ......bdbbddddbbdb......
                .....bdbbdbbbbdbbdb.....
                .....bdbdbddddbdbdb.....
                .....cdbbdbbbbdbbdc.....
                .....cbdbbddddbbdbc.....
                .....efbddbbbbddbce.....
                .....eeffbddddbccee.....
                .....eeeeffcccceee......
                .....ceeeeeeeeeeee......
                .....ceeeeeeeeeeee......
                .....feeeeeeeeeeee......
                .....cceeeeeeeeeee......
                ......feeeeeeeeeee......
                .....6fceeeeeeeeee6.....
                ....6776eeeeeeeee676....
                ...6777666eeee6666776...
                ..67768e67766777667776..
                ...668ee7768867788666...
                ......ee77eeee77ecee....
                ......ee6eeeeee6eef.....
                ......eeeeeeeeeeeef.....
                ......eeeeeeeeeeeef.....
                ......eeeeeeeeeeecf.....
                ......ceeeeeeeeeecf.....
                ......ceeeeeeeeeeff.....
                ......feeeeeeeeeefe.....
                .....6feeeeeeeeeef6.....
                ....6776eeeeeeeee676....
                ...6777666eeee6667776...
                ..6776ee67777777667776..
                ...668ee7768867788666...
                ......ee77eeee67ee......
                ......ee6eeeeee6ce......
                `
        } else {
            topImage = img`
                .....6fceeeeeeeeee6.....
                ....6776eeeeeeeee676....
                ...6777666eeee6666776...
                ..67768e67766777667776..
                ...668ee7768867788666...
                ......ee77eeee77ecee....
                ......ee6eeeeee6eef.....
                ......eeeeeeeeeeeef.....
                ......eeeeeeeeeeeef.....
                ......eeeeeeeeeeecf.....
                ......ceeeeeeeeeecf.....
                ......ceeeeeeeeeeff.....
                ......feeeeeeeeeefe.....
                .....6feeeeeeeeeef6.....
                ....6776eeeeeeeee676....
                ...6777666eeee6667776...
                ..6776ee67777777667776..
                ...668ee7768867788666...
                ......ee77eeee67eeee....
                ......ee6eeeeee6cef.....
                ......eeeeeeeeeeeef.....
                ......eeeeeeeeeeeef.....
                ......eeeeeeeeeeecf.....
                ......eeeeeeeeeeecf.....
                ......eeeeeeeeeeeff.....
                ......feeeeeeeeeefe.....
                .....6feeeeeeeeeef6.....
                ....6776eeeeeeeee676....
                ...6777666eeee6667776...
                ..6776ee67777777667776..
                ...668ee7768867788666...
                ......ee77eeee67ee......
                ......ee6eeeeee6ce......
                ......eefeeeeeeece......
                ......eeceeeeeeece......
                ......eeceeeeeeefe......
                ......eeceeeeeeefe......
                ......eeeeeeeeeefe......
                ......eeeeeeeeeece......
                .....6eeeeeeeeeece6.....
                ....6776eeeeeeeee676....
                ...6776666eeee6766776...
                ..6776ee77777777667776..
                ...668ce7768867788666...
                ......ce77eeee67ee......
                ......eeeeeeeeeeee......
                ......eeeeeeeeeeee......
                ......eeeeeeeeeeee......
                ......eeeeeeeeeeee......
                ......eeeeeeeeeeee......
                ......eeeeeeeeeeee......
                ......eeeeeeeeeeee......
                ......beeeeeeeeeeb......
                .......beeeeeeeeb.......
                ........beeeeeeb........
                ........................
                `
            bottomImage = img`
                ........................
                ..........bbbb..........
                ........bbddddbb........
                .......bddbbbbddb.......
                ......bdbbddddbbdb......
                .....bdbbdbbbbdbbdb.....
                .....bdbdbddddbdbdb.....
                .....cdbbdbbbbdbbdc.....
                .....cbdbbddddbbdbc.....
                .....efbddbbbbddbce.....
                .....eeffbddddbccee.....
                .....eeeeffcccceee......
                .....ceeeeeeeeeeee......
                .....ceeeeeeeeeeee......
                .....feeeeeeeeeeee......
                .....cceeeeeeeeeee......
                ......feeeeeeeeeee......
                .....6fceeeeeeeeee6.....
                ....6776eeeeeeeee676....
                ...6777666eeee6666776...
                ..67768e67766777667776..
                ...668ee7768867788666...
                ......ee77eeee77ecee....
                ......ee6eeeeee6eef.....
                `
        }
        gapImage = image.create(2, scene.screenHeight())
        gapImage.fill(1)
        gapSprite = sprites.create(gapImage, SpriteKind.Gap)
        gapSprite.setFlag(SpriteFlag.AutoDestroy, true)
        gapSprite.setFlag(SpriteFlag.Invisible, true)
        gapSprite.left = scene.screenWidth()
        gapSprite.vx = -45
        projectile = sprites.createProjectileFromSide(topImage, -45, 0)
        projectile.top = 0
        projectile = sprites.createProjectileFromSide(bottomImage, -45, 0)
        projectile.bottom = scene.screenHeight()
    }
})
forever(function () {
    music.playMelody("G B A G C5 B A B ", 120)
})
